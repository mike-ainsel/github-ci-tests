name: Dump Context

on: [workflow_dispatch]

jobs:
  dump-env:
    strategy:
      matrix:
        os:
          - macos-latest
          - ubuntu-latest
          - windows-latest

    runs-on: ${{ matrix.os }}
    name: Dump env vars
    steps:
      - shell: bash
        env:
          CONTEXT_GITHUB: ${{ toJSON(github) }}
          CONTEXT_JOB: ${{ toJSON(job) }}
          CONTEXT_STEPS: ${{ toJSON(steps) }}
          CONTEXT_RUNNER: ${{ toJSON(runner) }}
          CONTEXT_STRATEGY: ${{ toJSON(strategy) }}
          CONTEXT_MATRIX: ${{ toJSON(matrix) }}
          CONTEXT_NEEDS: ${{ toJSON(needs) }}
          CONTEXT_INPUTS: ${{ toJSON(inputs) }}
        run:
          echo "context.github"
          jq '.' <<<"${CONTEXT_GITHUB}"

          echo "context.job"
          jq '.' <<<"${CONTEXT_JOB}"

          echo "context.steps"
          jq '.' <<<"${CONTEXT_STEPS}"

          echo "context.runner"
          jq '.' <<<"${CONTEXT_RUNNER}"

          echo "context.strategy"
          jq '.' <<<"${CONTEXT_STRATEGY}"

          echo "context.matrix"
          jq '.' <<<"${CONTEXT_MATRIX}"

          echo "context.needs"
          jq '.' <<<"${CONTEXT_NEEDS}"

          echo "context.inputs"
          jq '.' <<<"${CONTEXT_INPUTS}"
